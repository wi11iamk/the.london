<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The London — Stories & Films</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The London. Ratio et veritas. A portfolio of films, scripts, and storyboards." />
  <link rel="canonical" href="https://the.london/" />

  <!-- Icons (root) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0B0C10">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0B0C10">
  <meta name="color-scheme" content="dark light">

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="The London">
  <meta property="og:title" content="The London">
  <meta property="og:description" content="The London. A portfolio of films, scripts, and storyboards.">
  <meta property="og:url" content="https://the.london/">
  <meta property="og:image" content="https://the.london/assets/og.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="The London logo">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Preload video so the first frame is ready ASAP -->
  <link rel="preload" as="video" href="/assets/the_london_4k24_master.mp4" type="video/mp4">

  <link rel="stylesheet" href="/assets/css/site.css" />

  <!-- Minimal inline styles so this works without touching your CSS file -->
  <style>
    .splash__stage{
      position:relative;
      width:min(960px,90vw);
      aspect-ratio:16/9;
      margin:4rem auto;
      border-radius:20px;
      background:#0B0C10;              /* no JPG fallback */
      box-shadow:0 6px 28px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .splash__video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:contain;
      opacity:0; transition:opacity .18s ease-out;
    }
    .splash.is-playing .splash__video{ opacity:1; }
  </style>
</head>
<body>
  <a href="#content" class="skiplink">Skip to content</a>

  <!-- FULLSCREEN INTRO (overlay) -->
  <div id="splash" class="splash" hidden aria-hidden="true">
    <button id="skipIntro" class="splash__skip" aria-label="Skip intro">Skip</button>

    <div class="splash__stage">
      <video id="introVideo"
             class="splash__video"
             playsinline muted autoplay preload="auto"
             aria-label="The London ident">
        <source src="/assets/the_london_4k24_master.mp4" type="video/mp4">
      </video>
    </div>

    <noscript>
      <!-- No JS: we won’t show a poster image, just skip the intro -->
      <style>#splash{display:none !important}</style>
    </noscript>
  </div>

  <div class="wrap">
    <header class="site-header" aria-label="Site header">
      <a class="brand" href="/">THE&nbsp;LONDON</a>
      <nav class="nav" aria-label="Primary">
        <a href="/works/">Works</a>
        <a href="/people/">People</a>
        <a href="/contact/">Contact</a>
      </nav>
    </header>

    <main id="content">
      <!-- Compact intro -->
      <section class="section intro">
        <p class="lead">
          Welcome. The London is a group of storytellers & filmmakers who explore human experience.
          <br />
          Cum ratio; pro veritas.
        </p>
      </section>

      <!-- Featured works -->
      <section class="section" aria-labelledby="works-h">
        <h2 id="works-h" class="h2">Featured</h2>
        <div class="grid">
          <article class="card">
            <a href="/works/extended-play/">
              <img class="thumb" src="/images/extended-play/poster.jpg"
                   alt="Extended Play poster" loading="lazy" decoding="async">
              <div class="meta">
                <div class="kicker">Short Film</div>
                <div class="title">Extended Play</div>
                <div class="desc">Loss remodels memory.</div>
              </div>
            </a>
          </article>

          <article class="card">
            <a href="/works/the-london-opening/">
              <img class="thumb" src="/assets/theLondon.jpg"
                   alt="The London Opening ident" loading="lazy" decoding="async">
              <div class="meta">
                <div class="kicker">Brand</div>
                <div class="title">The London System</div>
                <div class="desc">Company identity &amp; title sequence.</div>
              </div>
            </a>
          </article>
        </div>
      </section>
    </main>

    <footer class="site-foot">© The London. All Rights Reserved.</footer>
  </div>

  <!-- Organization schema (optional) -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"The London","url":"https://the.london","logo":"https://the.london/favicon.svg"}
  </script>

  <!-- INTRO CONTROLLER (posterless reveal) -->
  <script>
  (function(){
    const splash = document.getElementById('splash');
    const stage  = document.querySelector('.splash__stage');
    const video  = document.getElementById('introVideo');
    const skip   = document.getElementById('skipIntro');

    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const seen = sessionStorage.getItem('introSeen') === '1';

    function hideSplash(){
      splash.classList.add('is-hiding');
      document.body.classList.remove('no-scroll');
      setTimeout(() => {
        splash.hidden = true;
        splash.classList.remove('is-active','is-hiding');
        // stop network/decoding
        video.pause();
        video.removeAttribute('src');
        while (video.firstChild) video.removeChild(video.firstChild);
        video.load();
      }, 650);
    }

    function revealVideo(){
      splash.classList.add('is-playing'); // fades video in (CSS)
    }

    if (!prefersReduced && !seen) {
      splash.hidden = false;
      document.body.classList.add('no-scroll');
      requestAnimationFrame(() => splash.classList.add('is-active'));
      sessionStorage.setItem('introSeen', '1');

      // autoplay hardening
      video.muted = true; video.setAttribute('muted','');
      video.playsInline = true; video.autoplay = true;

      // Safari: nudge decode of first frame
      video.addEventListener('loadedmetadata', () => {
        try { if (video.currentTime === 0) video.currentTime = 0.001; } catch(_) {}
      }, { once:true });

      // Reveal when a frame can be painted (no poster flicker)
      const onReady = () => revealVideo();
      video.addEventListener('playing', onReady, { once:true });
      video.addEventListener('canplay', onReady, { once:true });
      video.addEventListener('loadeddata', () => {
        if (video.readyState >= 2) revealVideo();
      }, { once:true });

      // End / error / skip
      video.addEventListener('ended', hideSplash, { once:true });
      video.addEventListener('error', hideSplash, { once:true });
      skip.addEventListener('click', hideSplash);

      // Safety: if autoplay blocked, just reveal page
      setTimeout(() => { if (video.currentTime < 0.01) hideSplash(); }, 3000);
      window.addEventListener('keydown', e => { if (e.key === 'Escape') hideSplash(); });
    }
  })();
  </script>
</body>
</html>
